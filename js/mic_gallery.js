var gallery_main=function(t){var a={settings:{preload:!1,slideDuration:500,layoutDuration:750,gallery_thumbnailsPerRow:2,gallery_mainSide:"right"},$window:null,$body:null,$gallery_main:null,$gallery_thumbnails:null,$viewer:null,$toggle:null,$navNext:null,$navPrevious:null,slides:[],current:null,locked:!1,keys:{27:function(){a.toggle()},38:function(){a.up()},40:function(){a.down()},32:function(){a.next()},39:function(){a.next()},37:function(){a.previous()}},initProperties:function(){a.$window=t(window),a.$body=t("body"),a.$gallery_thumbnails=t("#gallery_thumbnails"),a.$viewer=t('<div id="viewer"><div class="inner"><div class="nav-next"></div><div class="nav-previous"></div><div class="toggle"></div></div></div>').appendTo(a.$body),a.$navNext=a.$viewer.find(".nav-next"),a.$navPrevious=a.$viewer.find(".nav-previous"),a.$gallery_main=t("#gallery_main"),t('<div class="toggle"></div>').appendTo(a.$gallery_main),a.$toggle=t(".toggle"),skel.vars.IEVersion<9&&a.$window.on("resize",function(){window.setTimeout(function(){a.$viewer.css("width",a.$window.width()-a.$gallery_main.width())},100)}).trigger("resize")},initEvents:function(){var e;a.$window.on("load",function(){a.$body.removeClass("is-loading-0"),window.setTimeout(function(){a.$body.removeClass("is-loading-1")},100),window.setTimeout(function(){a.$body.removeClass("is-loading-2")},100+Math.max(a.settings.layoutDuration-150,0))}),a.$window.on("resize",function(){a.$body.addClass("is-loading-0"),window.clearTimeout(e),e=window.setTimeout(function(){a.$body.removeClass("is-loading-0")},100)}),a.$viewer.on("touchend",function(){skel.breakpoint("medium").active&&a.hide()}),a.$viewer.on("touchstart",function(e){a.$viewer.touchPosX=e.originalEvent.touches[0].pageX,a.$viewer.touchPosY=e.originalEvent.touches[0].pageY}).on("touchmove",function(e){if(null!==a.$viewer.touchPosX&&null!==a.$viewer.touchPosY){var i=a.$viewer.touchPosX-e.originalEvent.touches[0].pageX,n=a.$viewer.touchPosY-e.originalEvent.touches[0].pageY;boundary=20,delta=50,n<boundary&&n>-1*boundary&&i>delta?a.next():n<boundary&&n>-1*boundary&&i<-1*delta&&a.previous();var l=a.$viewer.outerHeight(),o=a.$viewer.get(0).scrollHeight-a.$viewer.scrollTop();(a.$viewer.scrollTop()<=0&&n<0||l-2<o&&o<l+2&&0<n)&&(e.preventDefault(),e.stopPropagation())}}),a.$gallery_main.on("touchstart",function(e){skel.breakpoint("xsmall").active||(a.$gallery_main.touchPosX=e.originalEvent.touches[0].pageX,a.$gallery_main.touchPosY=e.originalEvent.touches[0].pageY)}).on("touchmove",function(e){if(!skel.breakpoint("xsmall").active&&null!==a.$gallery_main.touchPosX&&null!==a.$gallery_main.touchPosY){var i=a.$gallery_main.touchPosX-e.originalEvent.touches[0].pageX,n=a.$gallery_main.touchPosY-e.originalEvent.touches[0].pageY;switch(boundary=20,delta=50,result=!1,a.settings.gallery_mainSide){case"left":result=n<boundary&&n>-1*boundary&&i>delta;break;case"right":result=n<boundary&&n>-1*boundary&&i<-1*delta}result&&a.hide();var l=a.$gallery_main.outerHeight(),o=a.$gallery_main.get(0).scrollHeight-a.$gallery_main.scrollTop();(a.$gallery_main.scrollTop()<=0&&n<0||l-2<o&&o<l+2&&0<n)&&(e.preventDefault(),e.stopPropagation())}}),a.$toggle.on("click",function(){a.toggle()}),a.$toggle.on("touchend",function(e){e.stopPropagation()}),a.$navNext.on("click",function(){a.next()}),a.$navPrevious.on("click",function(){a.previous()}),a.$body.on("keydown","input,select,textarea",function(e){e.stopPropagation()}),a.$window.on("keydown",function(e){skel.breakpoint("xsmall").active||e.keyCode in a.keys&&(e.stopPropagation(),e.preventDefault(),a.keys[e.keyCode]())})},initViewer:function(){a.$gallery_thumbnails.on("click",".thumbnail",function(e){var i=t(this);e.preventDefault(),e.stopPropagation(),a.locked&&i.blur(),a.switchTo(i.data("index"))}),a.$gallery_thumbnails.children().each(function(){var e,i=t(this),n=i.children(".thumbnail");if(e={$parent:i,$slide:null,$slideImage:null,$slideCaption:null,url:n.attr("href"),loaded:!1},i.attr("tabIndex","-1"),e.$slide=t('<div class="slide"><div class="caption"></div><div class="image"></div></div>'),e.$slideImage=e.$slide.children(".image"),e.$slideImage.css("background-image","").css("background-position","center center"),e.$slideCaption=e.$slide.find(".caption"),i.children().not(n).appendTo(e.$slideCaption),a.settings.preload){t('<img src="'+e.url+'" />');e.$slideImage.css("background-image","url("+e.url+")"),e.$slide.addClass("loaded"),e.loaded=!0}a.slides.push(e),n.data("index",a.slides.length-1)})},init:function(){skel.vars.IEVersion<10&&(a.settings.slideDuration=0,a.settings.layoutDuration=0),skel.breakpoints({xlarge:"(max-width: 1680px)",large:"(max-width: 1280px)",medium:"(max-width: 980px)",small:"(max-width: 736px)",xsmall:"(max-width: 480px)"}),a.initProperties(),a.initViewer(),a.initEvents(),window.setTimeout(function(){skel.on("-xsmall !xsmall",function(){null===a.current&&a.switchTo(0,!0)})},0)},switchTo:function(e,i){if((a.current!=e||skel.breakpoint("xsmall").active)&&!a.locked){a.locked=!0,!i&&skel.breakpoint("medium").active&&8<skel.vars.IEVersion&&a.hide();var n=null!==a.current?a.slides[a.current]:null,l=a.slides[e];a.current=e,n&&(n.$parent.removeClass("active"),n.$slide.removeClass("active")),l.$parent.addClass("active").focus();var o=function(){n&&n.$slide.detach(),l.$slide.appendTo(a.$viewer),l.loaded?window.setTimeout(function(){l.$slide.addClass("active"),window.setTimeout(function(){a.locked=!1},100)},100):window.setTimeout(function(){l.$slide.addClass("loading"),t('<img src="'+l.url+'" />').on("load",function(){l.$slideImage.css("background-image","url("+l.url+")"),l.loaded=!0,l.$slide.removeClass("loading"),l.$slide.addClass("active"),window.setTimeout(function(){a.locked=!1},100)})},100)};n?window.setTimeout(o,a.settings.slideDuration):o()}},next:function(){var e,i=a.current;e=a.slides.length-1<=i?0:i+1,a.switchTo(e)},previous:function(){var e,i=a.current,n=a.slides.length;e=i<=0?n-1:i-1,a.switchTo(e)},up:function(){if(!a.$body.hasClass("fullscreen")){var e,i=a.current,n=a.slides.length,l=a.settings.gallery_thumbnailsPerRow;e=i<=l-1?n-(l-1-i)-1:i-l,a.switchTo(e)}},down:function(){if(!a.$body.hasClass("fullscreen")){var e,i=a.current,n=a.slides.length,l=a.settings.gallery_thumbnailsPerRow;e=n-l<=i?i-n+l:i+l,a.switchTo(e)}},show:function(){a.$body.hasClass("fullscreen")&&(a.$body.removeClass("fullscreen"),a.$gallery_main.focus())},hide:function(){a.$body.hasClass("fullscreen")||(a.$body.addClass("fullscreen"),a.$gallery_main.blur())},toggle:function(){a.$body.hasClass("fullscreen")?a.show():a.hide()}};return a}(jQuery);gallery_main.init();