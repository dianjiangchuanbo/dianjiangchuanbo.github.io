!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery||window.Zepto)}(function(s,t){var r,e,h=window,u=s(h),n={threshold:0,failure_limit:0,event:"scroll",effect:"show",effect_params:null,container:h,data_attribute:"original",data_srcset_attribute:"original-srcset",skip_invisible:!0,appear:p,load:p,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:p,no_fake_img_loader:!1,placeholder_data_img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",placeholder_real_img:"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png"};function p(){}function d(t,e){return(e._$container==u?("innerHeight"in h?h.innerHeight:u.height())+u.scrollTop():e._$container.offset().top+e._$container.height())<=t.offset().top-e.threshold}function A(t,e){return(e._$container==u?u.scrollTop():e._$container.offset().top)>=t.offset().top+e.threshold+t.height()}function a(c,f){var _=0;c.each(function(t,e){var a,r,n,o,l=c.eq(t);if(!(l.width()<=0&&l.height()<=0||"none"===l.css("display")))if(f.vertical_only)if(A(l,f));else if(d(l,f)){if(++_>f.failure_limit)return!1}else i();else if(A(l,f)||(n=l,((o=f)._$container==u?s.fn.scrollLeft?u.scrollLeft():h.pageXOffset:o._$container.offset().left)>=n.offset().left+o.threshold+n.width()));else if(d(l,f)||(a=l,((r=f)._$container==u?u.width()+(s.fn.scrollLeft?u.scrollLeft():h.pageXOffset):r._$container.offset().left+r._$container.width())<=a.offset().left-r.threshold)){if(++_>f.failure_limit)return!1}else i();function i(){l.trigger("_lazyload_appear"),_=0}})}function g(e){return e.filter(function(t){return!e.eq(t).data("_lazyload_loadStarted")})}e=Object.prototype.toString,r=function(t){return e.call(t).replace("[object ","").replace("]","")},s.fn.hasOwnProperty("lazyload")||(s.fn.lazyload=function(f){var t,_,e,d=this;return s.isPlainObject(f)||(f={}),s.each(n,function(t,e){var a=r(f[t]);-1!=s.inArray(t,["threshold","failure_limit","check_appear_throttle_time"])?"String"==a?f[t]=parseInt(f[t],10):"Number"!=a&&(f[t]=e):"container"==t?(f.hasOwnProperty(t)?f[t]==h||f[t]==document?f._$container=u:f._$container=s(f[t]):f._$container=u,delete f.container):!n.hasOwnProperty(t)||f.hasOwnProperty(t)&&a==r(n[t])||(f[t]=e)}),t="scroll"==f.event,e=0==f.check_appear_throttle_time?a:function(t,e){var a,r,n,o,l=0;return function(){a=this,r=arguments;var t=new Date-l;return o||(e<=t?i():o=setTimeout(i,e-t)),n};function i(){o=0,l=+new Date,n=t.apply(a,r),r=a=null}}(a,f.check_appear_throttle_time),_=t||"scrollstart"==f.event||"scrollstop"==f.event,d.each(function(t,e){var r=this,n=d.eq(t),a=n.attr("src"),o=n.attr("data-"+f.data_attribute),l=f.url_rewriter_fn==p?o:f.url_rewriter_fn.call(r,n,o),i=n.attr("data-"+f.data_srcset_attribute),c=n.is("img");if(n.data("_lazyload_loadStarted")||a==l)return n.data("_lazyload_loadStarted",!0),void(d=g(d));n.data("_lazyload_loadStarted",!1),c&&!a&&n.one("error",function(){n.attr("src",f.placeholder_real_img)}).attr("src",f.placeholder_data_img),n.one("_lazyload_appear",function(){var t,e=s.isArray(f.effect_params);function a(){t&&n.hide(),c?(i&&n.attr("srcset",i),l&&n.attr("src",l)):n.css("background-image",'url("'+l+'")'),t&&n[f.effect].apply(n,e?f.effect_params:[]),d=g(d)}n.data("_lazyload_loadStarted")||(t="show"!=f.effect&&s.fn[f.effect]&&(!f.effect_params||e&&0==f.effect_params.length),f.appear!=p&&f.appear.call(r,n,d.length,f),n.data("_lazyload_loadStarted",!0),f.no_fake_img_loader||i?(f.load!=p&&n.one("load",function(){f.load.call(r,n,d.length,f)}),a()):s("<img />").one("load",function(){a(),f.load!=p&&f.load.call(r,n,d.length,f)}).attr("src",l))}),_||n.on(f.event,function(){n.data("_lazyload_loadStarted")||n.trigger("_lazyload_appear")})}),_&&f._$container.on(f.event,function(){e(d,f)}),u.on("resize load",function(){e(d,f)}),s(function(){e(d,f)}),this})});